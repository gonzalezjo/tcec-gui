
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="keywords" content="tcec,chess,engine,live,game,broadcast,super x1,super x2,event" />
    <link id="favicon" rel="icon" href="img/favicon.ico">

    <title>TCEC - Live Chess Broadcast</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="dist/css/chessboard-0.3.0.min.css" rel="stylesheet">
    <link href="dist/css/chessboard.css" rel="stylesheet">
    <link href="dist/css/tooltipster.bundle.min.css" rel="stylesheet">
    <link href="dist/bootstrap-table.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Custom styles for this template -->
    <!-- vch -->
    <link href="dist/css/custom.css?v=1000000000000000000043" rel="stylesheet">
    <link href="dist/css/bootstrap-slider.min.css" rel="stylesheet">
  </head>

  <body class="dark">

   <main role="main" class="container" style="width: 100%; max-width: 100%">
      <div class="row">
        <div class="col-md-12">
          <br>  
          <table id="event-overview" class="eventoverview">
          </table>
        </div>
      </div>

      <br>

      <div class="row">
        <div class="col-md-4" id="board-container">
          <div class="row" id="board-top-engine-eval">
            <div class="col-4 d-inline-block d-sm-none d-md-none d-lg-none d-xl-none">
              <span class="board-top-engine-eval black-engine-name truncate-name"></span>
            </div>
            <div class="col-3 d-inline-block d-sm-none d-md-none d-lg-none d-xl-none text-center">
              <span class="h5 d-inline board-top-engine-eval black-time-remaining">
                0:00:00
              </span>
            </div>
            <div class="col-2 d-inline-block d-sm-none d-md-none d-lg-none d-xl-none text-center">
              <span class="h5 board-top-engine-eval black-time-used">
                0:00
              </span>
            </div>
            <div class="col-2 d-inline-block d-sm-none d-md-none d-lg-none d-xl-none text-center">
              <span class="h5 d-inline board-top-engine-eval black-engine-eval">
              </span>
            </div>
          </div>

          <!-- Main chess board -->
          <div id="board" style="width: 100%"></div>

          <div class="row" id="board-bottom-engine-eval">
            <div class="col-4 d-inline-block d-sm-none d-md-none d-lg-none d-xl-none">
              <span class="board-bottom-engine-eval white-engine-name truncate-name"></span>
            </div>
            <div class="col-3 d-inline-block d-sm-none d-md-none d-lg-none d-xl-none text-center">
              <span class="h5 d-inline board-bottom-engine-eval white-time-remaining">
                0:00:00
              </span>
            </div>
            <div class="col-2 d-inline-block d-sm-none d-md-none d-lg-none d-xl-none text-center">
              <span class="h5 board-bottom-engine-eval white-time-used">
                0:00
              </span>
            </div>
            <div class="col-2 d-inline-block d-sm-none d-md-none d-lg-none d-xl-none text-center">
              <span class="h5 d-inline board-bottom-engine-eval white-engine-eval">
              </span>
            </div>
          </div>

          <div class="btn-group d-flex navigation-buttons" role="group">
            <a href="#/" class="btn btn-primary btn-sm w-100 rightborder" id="board-to-first">
              <i class="fa fa-angle-double-left"></i>
            </a>
            <a href="#/" class="btn btn-primary btn-sm w-100 rightborder" id="board-previous">
                <i class="fa fa-angle-left"></i>
            </a>
            <a href="#/" class="btn btn-primary btn-sm w-100 rightborder" id="board-autoplay">
                <i class="fa fa-play"></i>
            </a>
            <a href="#/" class="btn btn-primary btn-sm w-100 rightborder" id="board-next">
                <i class="fa fa-angle-right"></i>
            </a>
            <a href="#/" class="btn btn-primary btn-sm w-100 rightborder" id="board-to-last">
                <i class="fa fa-angle-double-right"></i>
            </a>
            <a href="#/" class="btn btn-primary btn-sm w-100 rightborder" id="board-reverse" title="Reverse board">
                <i class="fa fa-random"></i>
            </a>
            <a href="#/" class="toggleDark btn btn-primary btn-sm w-100 rightborder" id="board-to-theme" title="Toggle page theme">
                <i class="fa fa-moon-o"></i>
            </a>
            <a href="#/" class="btn btn-primary btn-sm w-100 rightborder fen" id="fen" onClick="copyFen()" title="Copy FEN">
                <i class="fa fa-copy"></i>
            </a>
            <a href="#/" class="refreshBoard btn btn-primary btn-sm w-100" id="board-to-sync" title="Resync pgn">
                <i class="fa fa-refresh"></i>
            </a>
            <span class="p1 fa-stack has-badge d-none" onclick="onLastMove()" data-count="" id="newmove"></span>
          </div>

          <br>
          <div id="engine-history"></div>
        </div>

        <div class="col-md-4" id="middle-data-column">
          <table class="table table-striped text-center py-0 engine-eval" id="infotable">
            <thead>
              <tr>
                <td style="width: 45%">
                    <img id="white-engine-info" src="img/chesspieces/wikipedia/wK.png" style="height: 20px">
                    <small class="d-none d-sm-none d-md-inline-block d-lg-inline-block d-xl-inline-block white-engine-name-full"></small>
                    <small class="d-inline-block d-sm-inline-block d-md-none d-lg-none d-xl-none white-engine-name truncate-name"></small>
                </td>
                <td style="width: 10%">
                  &nbsp;
                </td>
                <td style="width: 45%">
                  <img id="black-engine-info" src="img/chesspieces/wikipedia/bK.png" style="height: 20px">
                  <small class="d-none d-sm-none d-md-inline-block d-lg-inline-block d-xl-inline-block black-engine-name-full"></small>
                  <small class="d-inline-block d-sm-inline-block d-md-none d-lg-none d-xl-none black-engine-name truncate-name"></small>
                </td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <a href="#" target="_blank" id="white-engine-chessprogramming">
                    <img src="img/tcec.jpg" alt="tcec" class="engineimage" id="white-engine" />
                  </a>
                </td>
                <td></td>
                <td>
                  <a href="#" target="_blank" id="black-engine-chessprogramming">
                    <img src="img/tcec.jpg" alt="tcec" class="engineimage" id="black-engine" />
                  </a>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="align-middle h1 d-inline white-engine-eval"></span>
                </td>
                <td>Evaluation</td>
                <td>
                  <span class="align-middle h1 d-inline black-engine-eval"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="white-engine-depth"></span>
                </td>
                <td>Depth</td>
                <td>
                  <span class="black-engine-depth"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="white-engine-speed"></span>
                </td>
                <td>Speed</td>
                <td>
                  <span class="black-engine-speed"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="white-engine-nodes"></span>
                </td>
                <td>Nodes</td>
                <td>
                  <span class="black-engine-nodes"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="white-engine-tbhits"></span>
                </td>
                <td>TB Hits</td>
                <td>
                  <span class="black-engine-tbhits"></span>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="h5 d-inline white-time-remaining">
                    0:00:00
                  </span>
                  <br>
                  <span class="white-time-used">
                    0:00
                  </span>
                  <i class="fa fa-cog fa-spin slow-spin white-to-move" style="float: left;"></i>
                </td>
                <td>&nbsp;</td>
                <td>
                  <span class="h5 d-inline black-time-remaining">
                    0:00:00
                  </span>
                  <br>
                  <span class="black-time-used">
                    0:00
                  </span>
                  <i class="fa fa-cog fa-spin slow-spin black-to-move" style="float: right;"></i>
                </td>
              </tr>
              <tr id="material-container">
                <td>
                  <span id="white-material">
                    <span class="q"></span>
                    <span class="r"></span>
                    <span class="b"></span>
                    <span class="n"></span>
                    <span class="p"></span>
                  </span>
                </td>
                <td>&nbsp;</td>
                <td>
                  <span id="black-material">
                    <span class="q"></span>
                    <span class="r"></span>
                    <span class="b"></span>
                    <span class="n"></span>
                    <span class="p"></span>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
   
          <br>

          <div id="charts">
            <div class="row">
              <div class="col-12 justify-content-around d-flex">
                  <ul class="nav nav-pills mb-3 nav-fill" id="pills-tab" role="tablist">
                    <li class="nav-item">
                  <a class="nav-link active" id="v-pills-eval-tab" data-toggle="pill" href="#v-pills-eval" role="tab" aria-controls="v-pills-eval" aria-selected="true">
                    Eval
                  </a>
                    </li>
                    <li class="nav-item">
                  <a class="nav-link" id="v-pills-time-tab" data-toggle="pill" href="#v-pills-time" role="tab" aria-controls="v-pills-time" aria-selected="false">
                    Time
                  </a>
                    </li>
                    <li class="nav-item">
                  <a class="nav-link" id="v-pills-speed-tab" data-toggle="pill" href="#v-pills-speed" role="tab" aria-controls="v-pills-speed" aria-selected="false">
                    Speed
                  </a>
                    </li>
                    <li class="nav-item">
                  <a class="nav-link" id="v-pills-depth-tab" data-toggle="pill" href="#v-pills-depth" role="tab" aria-controls="v-pills-depth" aria-selected="false">
                    Depth
                  </a>
                    </li>
                    <li class="nav-item">
                  <a class="nav-link" id="v-pills-tbhits-tab" data-toggle="pill" href="#v-pills-tbhits" role="tab" aria-controls="v-pills-tbhits" aria-selected="false">
                    TB
                  </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="v-pills-pv-tab" data-toggle="pill" href="#v-pills-pv" role="tab" aria-controls="v-pills-pv" aria-selected="false">
                        PV
                      </a>
                    </li>
                  </ul>
              </div>
              <div class="col-12">
                <div class="tab-content" id="v-pills-tabContent">
                  <div class="tab-pane fade show active" id="v-pills-eval" role="tabpanel" aria-labelledby="v-pills-eval-tab">
                    <canvas style="height: 250px;" id="eval-graph"></canvas>
                  </div>
                  <div class="tab-pane fade show" id="v-pills-time" role="tabpanel" aria-labelledby="v-pills-time-tab">
                    <canvas style="height: 250px;" id="time-graph"></canvas>
                  </div>
                  <div class="tab-pane fade" id="v-pills-speed" role="tabpanel" aria-labelledby="v-pills-speed-tab">
                    <canvas style="height: 250px;" id="speed-graph"></canvas>
                  </div>
                  <div class="tab-pane fade" id="v-pills-depth" role="tabpanel" aria-labelledby="v-pills-depth-tab">
                    <canvas style="height: 250px;" id="depth-graph"></canvas>
                  </div>
                  <div class="tab-pane fade" id="v-pills-tbhits" role="tabpanel" aria-labelledby="v-pills-tbhits-tab">
                    <canvas style="height: 250px;" id="tbhits-graph"></canvas>
                  </div>
                  <div class="tab-pane fade" id="v-pills-pv" role="tabpanel" aria-labelledby="v-pills-pv-tab">
                    <div class="row">
                      <div class="col-12 col-md-12">
                        <div id="pv-board" style="width: 250px; margin-left: auto; margin-right: auto;"></div>
                      </div>
                    </div>
                     <div class="btn-group d-flex navigation-buttons" style="width: 250px; margin-left: auto; margin-right:auto;" role="group">
                        <a href="#/" class="btn btn-primary btn-sm w-100" id="pv-board-black">
                          <img src="img/chesspieces/wikipedia/bP.png" style="height: 16px" />
                        </a>
                        <a href="#/" class="btn btn-primary btn-sm w-100" id="pv-board-to-first">
                          <i class="fa fa-angle-double-left"></i>
                        </a>
                        <a href="#/" class="btn btn-primary btn-sm w-100" id="pv-board-previous">
                          <i class="fa fa-angle-left"></i>
                        </a>
                        <a href="#/" class="btn btn-primary btn-sm w-100" id="pv-board-autoplay">
                          <i class="fa fa-play"></i>
                        </a>
                        <a href="#/" class="btn btn-primary btn-sm w-100" id="pv-board-next">
                          <i class="fa fa-angle-right"></i>
                        </a>
                        <a href="#/" class="btn btn-primary btn-sm w-100" id="pv-board-to-last">
                          <i class="fa fa-angle-double-right"></i>
                        </a>
                        <a href="#/" class="btn btn-primary btn-sm w-100" id="pv-board-reverse">
                          <i class="fa fa-random"></i>
                        </a>
                        <a href="#/" class="btn btn-primary btn-sm w-100" id="pv-board-white">
                          <img src="img/chesspieces/wikipedia/wP.png" style="height: 16px" />
                        </a>
                      </div>
                      <div class="row">
                        <div class="col-12 text-center">
                          <small>
                            <code id="pv-board-fen"></code>
                          </small>
                        </div>
                      </div>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <table id="crosstable" class="table-dark table-striped">
          </table>
          <hr />
          <div id="live-eval-cont"></div>
          <h5><span class="black-engine-name"></span> PV (Black)</h5>
          <div class="engine-pv alert alert-dark" id="black-engine-pv"></div>
          <h5><span class="white-engine-name"></span> PV (White)</h5>
          <div class="engine-pv alert alert-dark" id="white-engine-pv"></div>
        </div>
   </div>

      <br>
      <br>
      <br>
      <br>

      <ul class="nav nav-pills mb-3 nav-justified" id="pills-tab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" id="pills-stand-tab" data-toggle="pill" href="#pills-stand" role="tab" aria-controls="pills-stand" aria-selected="true">Standings</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="pills-cross-tab" data-toggle="pill" href="#pills-cross" role="tab" aria-controls="pills-cross" aria-selected="true">Crosstable</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="pills-sched-tab" data-toggle="pill" href="#pills-sched" role="tab" aria-controls="pills-sched" aria-selected="false">Schedule</a>
        </li>
      </ul>
      <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane show active fade smallfont" id="pills-stand" role="tabpanel" aria-labelledby="pills-stand-tab">
          
        </div>
        <div class="tab-pane fade smallfont" id="pills-cross" role="tabpanel" aria-labelledby="pills-cross-tab">
          <table id="standtable" class="table-dark table-striped">
          </table>
        </div>
        <div class="tab-pane fade smallfont scheduleclass" id="pills-sched" role="tabpanel" aria-labelledby="pills-sched-tab">
          <div id="schedule-wrapper">
            
          </div>
        </div>
      </div>

      <br>

      <div class="row">
          <div class="col-md-12 text-center">
            <div>
                &copy;<a href="http://tcec.chessdom.com/">TCEC</a>
                <a target="_blank" href="http://www.chessdom.com">Chessdom</a>
                &copy;<a target="_blank" href="https://arena.chessdom.com/">Chess Arena</a> 2010-2018
            </div>
            <div>
                TCEC is powered by ... <a target="_blank" href="http://chessboardjs.com">chessboard.js</a> and <a target="_blank" href="https://github.com/gvreuls/cutechess">cutechess-cli</a>
            </div>
        </div>
      </div>

    </main><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.0/js.cookie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.12.1/bootstrap-table.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.2/chess.js"></script>
    <script src="dist/js/graphs.js?v=10000000000000000000042"></script>
    <script src="dist/js/chessboard.js?v=10000000000000000000042"></script>
    <script src="dist/js/tcec.js?v=10000000000000000000042"></script>
    <script src="dist/js/tooltipster.bundle.min.js"></script>
    <script src="dist/js/bootstrap-4-navbar.js?v=1000000000000000000042"></script>
    <script src="dist/js/themes.js"></script>
    <script src="dist/js/bootstrap-slider.min.js"></script>
    <script src="dist/js/clipboard.min.js"></script>
    <script src="http://tcec.chessdom.com:8888/socket.io/socket.io.js"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    <script>
      $(document).ready(function () {
        localStorage.setItem('tcec-twitch-back-mode', 2);
        setDark();
      });

      var {board, pvBoard } = setBoardInit();

      $('.refreshBoard').on('click', function() {
        updatePgn(1);
      });

      $('#event-overview').bootstrapTable({
        classes: 'table table-striped table-no-bordered',
        columns: [
          {
              field: 'TimeControl',
              title: 'TC'
          },
          {
              field: 'Termination',
              title: 'Adj Rule'
          },
          {
              field: 'Result',
              title: 'Result'
          },
          {
              field: 'Round',
              title: 'Round'
          },
          {
              field: 'Opening',
              title: 'Opening'
          },
          {
              field: 'Event',
              title: 'Event'
          },
          {
              field: 'ECO',
              title: 'ECO'
          },
          {
              field: 'Viewers',
              title: 'Viewers'
          }
        ]
      });

      $('#schedule').bootstrapTable({
          classes: 'table table-striped table-no-bordered',
          pagination: true,
          paginationLoop: true,
          striped: true,
          smartDisplay: true,
          sortable: true,
          pageList: [10,25,50,112],
          rememberOrder: true,
          search: true,   
          columns: [
          {
              field: 'Game',
              title: 'Game'
              ,sortable: true
          },
          {
              field: 'White',
              title: 'White'
              ,sortable: true
          }, 
          {
            field: 'WhiteEv',
            title: 'Ev'
              ,sortable: true
          },
          {
              field: 'Black',
              title: 'Black'
              ,sortable: true
          },
          {
            field: 'BlackEv',
            title: 'Ev'
              ,sortable: true
          },
          {
            field: 'Result',
            title: 'Result'
              ,sortable: true
          },
          {
            field: 'Moves',
            title: 'Moves'
              ,sortable: true
          },
          {
            field: 'Duration',
            title: 'Duration'
              ,sortable: true
          },
          {
            field: 'Opening',
            title: 'Opening',
            sortable: true,
            align: 'left'
          },
          {
            field: 'Termination',
            title: 'Termination'
              ,sortable: true
          },
          {
            field: 'ECO',
            title: 'ECO'
              ,sortable: true
          },
          {
            field: 'FinalFen',
            title: 'Final Fen',
            align: 'left'
          },
          {
            field: 'Start',
            title: 'Start'
          }
        ]
      });

      $(function() {

        var options = {
          sloppy: true
        };

        var sliderVale = localStorage.getItem('tcec-chat-slider');
        if (sliderVale == undefined)
        {
           sliderVale = 100;
        }
        var chatHeight = $("#board-container").height();
        var chatHeight1 = parseInt(chatHeight * sliderVale/100);

        $('#chatright').height(chatHeight1);

        $( window ).resize(function() {
          board.resize();
          $('#chatright').height(chatHeight1);
          $('#chatright').width('100%');
        });

        setSound();  
        initToolTip();
        updatePgn();
        updateLiveEvalInit();
        $(document).ready(function () {
        	 // setDefaultThemes();
          window.setTimeout(function() 
          { 
             setTwitch();
          }, 10000);
          window.setTimeout(function() 
                            { 
                               updateLiveChart();
                               updateLiveEval();
                            }, 2000);
          window.setTimeout(function() 
                            { 
                               updateTables();
                            }, 3000);
          window.setTimeout(function() 
                            { 
                               if ($('#google_adverts').height() <= 0) {
                                 $('.encouragement').show();
                               } else {
                                 $('.encouragement').hide();
                               }
                            }, 15000);
         });

        $('#chatsize').bootstrapSlider({
          min:40,
          max:100,
          value: sliderVale,
          handle: 'round',
          formatter: function(value) {
            $('#chatright').height(parseInt(value/100 * chatHeight));
            localStorage.setItem('tcec-chat-slider', value);
          }
        });

        setDark();
      });

      var socket = io.connect('http://tcec.chessdom.com:8888');
     
      socket.on('crosstable', function(data){
         updateCrosstableData(data);
         updateStandtableData(data);
         });
      socket.on('liveeval', function(data){
         updateLiveEvalData(data);
         });
      socket.on('pgn', function(data){
         updatePgnData(data, 1);
         });
      socket.on('schedule', function(data){
         updateScheduleData(data);
         });
      socket.on('livechart', function(data){
         updateLiveChartData(data);
         });
      socket.on('lastpgntime', function(data){
        setLastMoveTime(data);
        });
      socket.on('users', function(data){
        setUsers(data);
        });

    </script>
    <audio id="move_sound">
      <source src="dist/audio/movesound.mp3" type="audio/mpeg"><embed src="dist/audio/movesound.mp3">
    </audio>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(
        ['_setAccount', 'UA-37458566-1'],
        ['_trackPageview'],
        ['b._setAccount', 'UA-1679851-1'],
        ['b._trackPageview']
      );
     
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </body>
</html>
